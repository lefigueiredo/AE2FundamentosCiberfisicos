#include <LiquidCrystal.h>
LiquidCrystal lcd(12, 11, 5, 4, 3, 2);	// Tela LCD
int ir_pin = 13;	    // Sensor Infravermelho entrada
int counter = 0;	    // Contador de passageiros
int hitObject = false;	// Booleano aux do contador entrada
int switchPin = 18;     // Botão deslizante

void setup(){
  Serial.begin(9600);
  pinMode(ir_pin,INPUT);	// Sensor entrada
  
  lcd.begin(16, 2);
  lcd.print("Num Passageiros");
  
  pinMode(14, OUTPUT);	// led RED
  pinMode(15, OUTPUT);	// Buzzer
  pinMode(16, OUTPUT);	// led BLUE
  pinMode(17, OUTPUT);	// led GREEN
  pinMode(switchPin, INPUT);	// Botão deslizante

}

void loop()
{
  int val = digitalRead(ir_pin);	// Variavel sensor entrada

  if (( val == 0 ) && ( hitObject == false )){	// Condição entrada
    counter++;
    hitObject = true;
    Serial.print("Counter = ");
    Serial.println(counter);
  }else if (( val == 1 ) && (hitObject == true )){
    hitObject = false;}
  
  lcd.setCursor(0, 1);
  lcd.print(">> ");
  lcd.print(counter);
  lcd.print(" / 10 <<");
  
  if ( counter <= 7 ){
    analogWrite(14, 0);
    analogWrite(16, 0);
    analogWrite(17, 255);
    
  } else if ( counter <= 9 ){
    analogWrite(14, 255);
    analogWrite(16, 0);
    analogWrite(17, 255);
    
  } else if ( counter > 9 ){
    analogWrite(14, 255);
    analogWrite(16, 0);
    analogWrite(17, 0);
    
    if (digitalRead(switchPin)){
      digitalWrite(15, HIGH);
      tone(15, 1783720093981, 500); 
      delay(250); 
      digitalWrite(15, LOW);
      delay(250);
      
    }else{
      digitalWrite(15, LOW);}  
  }    
        
}
